<%
if (Array.isArray(opt.offers) && opt.offers.length) {
  const search = new _.EcomSearch()
  let items
  try {
    await search.setProductIds(opt.offers).fetch(true)
    items = search.getItems().filter(item => _.ecomUtils.inStock(item))
  } catch (err) {
    console.error(err)
    items = []
  }

  if (items.length) {
    %>
    <section class="offers-timer my-4 my-lg-5">
      <div class="container">
        <div>
          <%- await include('@/sections/inc/timer', { _, opt }) %>
        </div>
          
        <ul class="ul__slides products-carousel__list">
          <% for (let i = 0; i < items.length; i++) { %>
            <li class="ul__slide products-carousel__item">
              <%- await include('@/sections/inc/product-item', {
                _, opt: { item: items[i] }
              }) %>
            </li>
          <% } %>
        </ul>        
      </div>
    </section>
    <%
  }
}
%>
